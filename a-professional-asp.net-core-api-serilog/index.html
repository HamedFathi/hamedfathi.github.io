<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>A Professional ASP.NET Core API - Serilog - Hamed Fathi&#039;s Blog</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Hamed Fathi&#039;s Blog"><meta name="msapplication-TileImage" content="/img/pic.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Hamed Fathi&#039;s Blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="Serilog is an alternative logging implementation that plugs into ASP.NET Core. It supports the same structured logging APIs, and receives log events from the ASP.NET Core framework class libraries, bu"><meta property="og:type" content="blog"><meta property="og:title" content="A Professional ASP.NET Core API - Serilog"><meta property="og:url" content="https://hamedfathi.github.io/a-professional-asp.net-core-api-serilog/"><meta property="og:site_name" content="Hamed Fathi&#039;s Blog"><meta property="og:description" content="Serilog is an alternative logging implementation that plugs into ASP.NET Core. It supports the same structured logging APIs, and receives log events from the ASP.NET Core framework class libraries, bu"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://hamedfathi.github.io/img/og_image.png"><meta property="article:published_time" content="2020-09-28T00:00:00.000Z"><meta property="article:modified_time" content="2023-07-28T08:36:42.662Z"><meta property="article:author" content="Hamed Fathi"><meta property="article:tag" content="dotnet"><meta property="article:tag" content="aspnetcore"><meta property="article:tag" content="webapi"><meta property="article:tag" content="log"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://hamedfathi.github.io/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://hamedfathi.github.io/a-professional-asp.net-core-api-serilog/"},"headline":"A Professional ASP.NET Core API - Serilog","image":["https://hamedfathi.github.io/img/og_image.png"],"datePublished":"2020-09-28T00:00:00.000Z","dateModified":"2023-07-28T08:36:42.662Z","author":{"@type":"Person","name":"Hamed Fathi"},"publisher":{"@type":"Organization","name":"Hamed Fathi's Blog","logo":{"@type":"ImageObject"}},"description":"Serilog is an alternative logging implementation that plugs into ASP.NET Core. It supports the same structured logging APIs, and receives log events from the ASP.NET Core framework class libraries, bu"}</script><link rel="canonical" href="https://hamedfathi.github.io/a-professional-asp.net-core-api-serilog/"><link rel="icon" href="/img/pic.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.0.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">Hamed Fathi&#039;s Blog</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/hamedfathi"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2020-09-28T00:00:00.000Z" title="9/28/2020, 12:00:00 AM">2020-09-28</time></span><span class="level-item"><a class="link-muted" href="/categories/aspnetcore-api/">aspnetcore-api</a></span></div></div><h1 class="title is-3 is-size-4-mobile">A Professional ASP.NET Core API - Serilog</h1><div class="content"><p><code>Serilog</code> is an alternative logging implementation that plugs into ASP.NET Core. It supports the same structured logging APIs, and receives log events from the ASP.NET Core framework class libraries, but adds a stack of features that make it a more appealing choice for some kinds of apps and environments.</p>
<span id="more"></span>

<p>Install the below packages</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">Install-Package Serilog.AspNetCore -Version 3.4.0<br>dotnet add package Serilog.AspNetCore --version 3.4.0<br>&lt;PackageReference Include=<span class="hljs-string">&quot;Serilog.AspNetCore&quot;</span> Version=<span class="hljs-string">&quot;3.4.0&quot;</span> /&gt;<br></code></pre></td></tr></table></figure>

<h2 id="Serilog-Enrichers"><a href="#Serilog-Enrichers" class="headerlink" title="Serilog Enrichers"></a>Serilog Enrichers</h2><p>To enable Structured Logging and to unleash the full potential of <code>Serilog</code>, we use <code>enrichers</code>. These enrichers give you additional details like Machine Name, ProcessId, Thread Id when the log event had occurred for better diagnostics. It makes a developer’s life quite simpler..</p>
<h2 id="Serilog-Sinks"><a href="#Serilog-Sinks" class="headerlink" title="Serilog Sinks"></a>Serilog Sinks</h2><p>Serilog <code>Sinks</code> in simpler words relate to destinations for logging the data. In the packages that we are going to install to our ASP.NET Core application, Sinks for <code>Console</code> and <code>File</code> are included out of the box. That means we can write logs to Console and File System without adding any extra packages. Serilog supports various other destinations like <code>MSSQL</code>, <code>SQLite</code>, <code>SEQ</code> and more.</p>
<h2 id="Logger-Initialization"><a href="#Logger-Initialization" class="headerlink" title="Logger Initialization"></a>Logger Initialization</h2><p>Exceptions thrown during start-up are some of the most disruptive errors your application might face, and so the very first line of code in our Serilog-enabled app will set up logging and make sure any nasties are caught and recorded.</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs cs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"><span class="hljs-built_in">string</span>[] args</span>)</span><br>    &#123;<br>        <span class="hljs-comment">// HERE</span><br>        Log.Logger = <span class="hljs-keyword">new</span> LoggerConfiguration()<br>            .Enrich.FromLogContext() <span class="hljs-comment">/*Enricher*/</span><br>            .WriteTo.Console() <span class="hljs-comment">/*Sink*/</span><br>            .CreateLogger();<br>        <span class="hljs-keyword">try</span><br>        &#123;<br>            Log.Information(<span class="hljs-string">&quot;Starting up&quot;</span>);<br>            CreateHostBuilder(args).Build().Run();<br>        &#125;<br>        catch (Exception ex)<br>        &#123;<br>            Log.Fatal(ex, <span class="hljs-string">&quot;Application start-up failed&quot;</span>);<br>        &#125;<br>        <span class="hljs-keyword">finally</span><br>        &#123;<br>            Log.CloseAndFlush();<br>        &#125;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> IHostBuilder <span class="hljs-title">CreateHostBuilder</span>(<span class="hljs-params"><span class="hljs-built_in">string</span>[] args</span>)</span> =&gt;<br>        Host.CreateDefaultBuilder(args)<br><br>            <span class="hljs-comment">// HERE</span><br>            <span class="hljs-comment">//Uses Serilog instead of default .NET Logger</span><br>            .UseSerilog()<br>            .ConfigureWebHostDefaults(webBuilder =&gt;<br>            &#123;<br>                webBuilder.UseStartup&lt;Startup&gt;();<br>            &#125;);<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>Cleaning the default logger</strong></p>
<p>The “Logging” section that you’ll find in <code>appsettings.json</code> isn’t used by <code>Serilog</code>, and can be removed:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>  <span class="hljs-attr">&quot;Logging&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;LogLevel&quot;</span>: &#123;<br>      <span class="hljs-attr">&quot;Default&quot;</span>: <span class="hljs-string">&quot;Information&quot;</span>,<br>      <span class="hljs-attr">&quot;Microsoft&quot;</span>: <span class="hljs-string">&quot;Warning&quot;</span>,<br>      <span class="hljs-attr">&quot;Microsoft.Hosting.Lifetime&quot;</span>: <span class="hljs-string">&quot;Information&quot;</span><br>    &#125;<br>  &#125;,<br>  <span class="hljs-attr">&quot;AllowedHosts&quot;</span>: <span class="hljs-string">&quot;*&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>After cleaning up here, the configuration looks like this:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>  <span class="hljs-attr">&quot;AllowedHosts&quot;</span>: <span class="hljs-string">&quot;*&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="Writing-your-own-log-events"><a href="#Writing-your-own-log-events" class="headerlink" title="Writing your own log events"></a>Writing your own log events</h2><p>You should use <code>ILogger&lt;T&gt;</code> to log your own events as following</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs cs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">HomeController</span> : <span class="hljs-title">Controller</span><br>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> ILogger&lt;HomeController&gt; _logger;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">HomeController</span>(<span class="hljs-params">ILogger&lt;HomeController&gt; logger</span>)</span><br>    &#123;<br>        _logger = logger;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> IActionResult <span class="hljs-title">Index</span>(<span class="hljs-params">[FromQuery] <span class="hljs-built_in">string</span> name</span>)</span><br>    &#123;<br>        _logger.LogInformation(<span class="hljs-string">&quot;Hello, &#123;Name&#125;!&quot;</span>, name);<br>        <span class="hljs-keyword">return</span> View();<br>    &#125; <br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="Log-Levels"><a href="#Log-Levels" class="headerlink" title="Log Levels"></a>Log Levels</h2><p>I also wanted you to know about the various Logging Levels. This is the fundamental concept of logging. When we wrote <code>_logger.LogInformation(&quot;Hello, &#123;Name&#125;!&quot;, name);</code>, we mentioned to the application that this is a log with the log-level set to <code>Information</code>. Log levels make sense because it allows you to define the type of log. Is it a critical log? just a debug message? a warning message?</p>
<p>There are 7 log-levels included :</p>
<ul>
<li><code>Trace</code>: Detailed messages with sensitive app data.</li>
<li><code>Debug</code>: Useful for the development environment.</li>
<li><code>Information</code>: General messages, like the way we mentioned earlier.</li>
<li><code>Warning</code>: For unexpected events.</li>
<li><code>Error</code>: For exceptions and errors.</li>
<li><code>Critical</code>: For failures that may need immediate attention.</li>
</ul>
<h2 id="Streamlined-request-logging"><a href="#Streamlined-request-logging" class="headerlink" title="Streamlined request logging"></a>Streamlined request logging</h2><p>Our log output will now be rather quiet. We didn’t want a dozen log events per request, but chances are, we’ll need to know what requests the app is handling in order to do most diagnostic analysis.</p>
<p>To switch request logging back on, we’ll add <code>Serilog</code> to the app’s middleware pipeline over in <code>Startup.cs</code>. You’ll find a <code>Configure()</code> method in there like the following:</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Configure</span>(<span class="hljs-params">IApplicationBuilder app, IWebHostEnvironment env</span>)</span><br>&#123;<br>    <span class="hljs-keyword">if</span> (env.IsDevelopment())<br>    &#123;<br>        app.UseDeveloperExceptionPage();<br>    &#125;<br>    <span class="hljs-keyword">else</span><br>    &#123;<br>        app.UseExceptionHandler(<span class="hljs-string">&quot;/Home/Error&quot;</span>);<br>        app.UseHsts();<br>    &#125;<br>    app.UseHttpsRedirection();<br>    app.UseStaticFiles();<br><br>    <span class="hljs-comment">// HERE</span><br>    app.UseSerilogRequestLogging();<br><br>    app.UseRouting();<br>    app.UseAuthorization();<br>    app.UseEndpoints(endpoints =&gt;<br>    &#123;<br>        endpoints.MapControllerRoute(<br>            name: <span class="hljs-string">&quot;default&quot;</span>,<br>            pattern: <span class="hljs-string">&quot;&#123;controller=Home&#125;/&#123;action=Index&#125;/&#123;id?&#125;&quot;</span>);<br>    &#125;);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>We’ll be a bit tactical about where we add <code>Serilog</code> into the pipeline. I tend not to want request logging for static files, so I add <code>UseSerilogRequestLogging()</code> <strong>later</strong> in the pipeline, as shown above.</p>
<h2 id="Read-from-configuration"><a href="#Read-from-configuration" class="headerlink" title="Read from configuration"></a>Read from configuration</h2><p>Change <code>Program.Main()</code> as following</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs cs"><span class="hljs-comment">// Program.cs</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"><span class="hljs-built_in">string</span>[] args</span>)</span><br>&#123;<br>    <span class="hljs-comment">// HERE</span><br>    <span class="hljs-comment">//Read Configuration from appSettings</span><br>    <span class="hljs-keyword">var</span> config = <span class="hljs-keyword">new</span> ConfigurationBuilder()<br>        .SetBasePath(Directory.GetCurrentDirectory())<br>        .AddJsonFile(<span class="hljs-string">&quot;appsettings.json&quot;</span>)<br>        .Build();<br><br>    Log.Logger = <span class="hljs-keyword">new</span> LoggerConfiguration()<br>        .MinimumLevel.Debug() <span class="hljs-comment">// &lt;- Set the minimum level</span><br>        .Enrich.FromLogContext()<br>        .Enrich.WithMachineName()<br>        .Enrich.WithProcessId()<br>        .Enrich.WithThreadId()<br>        .Enrich.WithCorrelationId()<br>        .WriteTo.Console()<br>        <span class="hljs-comment">/*HERE*/</span><br>        .ReadFrom.Configuration(config)<br>        .CreateLogger();<br>    <span class="hljs-keyword">try</span><br>    &#123;<br>        Log.Information(<span class="hljs-string">&quot;Starting up&quot;</span>);<br>        CreateHostBuilder(args).Build().Run();<br>    &#125;<br>    catch (Exception ex)<br>    &#123;<br>        Log.Fatal(ex, <span class="hljs-string">&quot;Application start-up failed&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">finally</span><br>    &#123;<br>        Log.CloseAndFlush();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>Setting up Serilog</strong></p>
<p>Add <code>Serilog</code> section to <code>appsettings.json</code></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>  <span class="hljs-attr">&quot;AllowedHosts&quot;</span>: <span class="hljs-string">&quot;*&quot;</span>,<br>  <span class="hljs-attr">&quot;Serilog&quot;</span>: <br>  &#123;<br>    <span class="hljs-attr">&quot;Using&quot;</span>:  [ <span class="hljs-string">&quot;Serilog.Sinks.Console&quot;</span>, <span class="hljs-string">&quot;Serilog.Sinks.File&quot;</span> ],<br>    <span class="hljs-attr">&quot;MinimumLevel&quot;</span>: &#123;<br>      <span class="hljs-attr">&quot;Default&quot;</span>: <span class="hljs-string">&quot;Debug&quot;</span>,<br>      <span class="hljs-attr">&quot;Override&quot;</span>: <br>      &#123;<br>        <span class="hljs-attr">&quot;Microsoft&quot;</span>: <span class="hljs-string">&quot;Warning&quot;</span>,<br>        <span class="hljs-attr">&quot;System&quot;</span>: <span class="hljs-string">&quot;Warning&quot;</span><br>      &#125;<br>    &#125;,<br>    <span class="hljs-attr">&quot;WriteTo&quot;</span>: [<br>      &#123;<br>        <span class="hljs-attr">&quot;Name&quot;</span>: <span class="hljs-string">&quot;Console&quot;</span><br>      &#125;,<br>      &#123;<br>        <span class="hljs-attr">&quot;Name&quot;</span>: <span class="hljs-string">&quot;File&quot;</span>,<br>        <span class="hljs-attr">&quot;Args&quot;</span>: &#123;<br>          <span class="hljs-attr">&quot;path&quot;</span>: <span class="hljs-string">&quot;D:\\Logs\\log.txt&quot;</span>,<br>          <span class="hljs-attr">&quot;outputTemplate&quot;</span>: <span class="hljs-string">&quot;&#123;Timestamp&#125; &#123;Message&#125;&#123;NewLine:1&#125;&#123;Exception:1&#125;&quot;</span><br>        &#125;<br>      &#125;<br>    ],<br>    <span class="hljs-attr">&quot;Destructure&quot;</span>: [<br>      &#123; <span class="hljs-attr">&quot;Name&quot;</span>: <span class="hljs-string">&quot;With&quot;</span>, <span class="hljs-attr">&quot;Args&quot;</span>: &#123; <span class="hljs-attr">&quot;policy&quot;</span>: <span class="hljs-string">&quot;Sample.CustomPolicy, Sample&quot;</span> &#125; &#125;,<br>      &#123; <span class="hljs-attr">&quot;Name&quot;</span>: <span class="hljs-string">&quot;ToMaximumDepth&quot;</span>, <span class="hljs-attr">&quot;Args&quot;</span>: &#123; <span class="hljs-attr">&quot;maximumDestructuringDepth&quot;</span>: <span class="hljs-number">4</span> &#125; &#125;,<br>      &#123; <span class="hljs-attr">&quot;Name&quot;</span>: <span class="hljs-string">&quot;ToMaximumStringLength&quot;</span>, <span class="hljs-attr">&quot;Args&quot;</span>: &#123; <span class="hljs-attr">&quot;maximumStringLength&quot;</span>: <span class="hljs-number">100</span> &#125; &#125;,<br>      &#123; <span class="hljs-attr">&quot;Name&quot;</span>: <span class="hljs-string">&quot;ToMaximumCollectionCount&quot;</span>, <span class="hljs-attr">&quot;Args&quot;</span>: &#123; <span class="hljs-attr">&quot;maximumCollectionCount&quot;</span>: <span class="hljs-number">10</span> &#125; &#125;<br>    ],<br>    <span class="hljs-attr">&quot;Enrich&quot;</span>: [<br>      <span class="hljs-string">&quot;FromLogContext&quot;</span>,<br>      <span class="hljs-string">&quot;WithMachineName&quot;</span>,<br>      <span class="hljs-string">&quot;WithProcessId&quot;</span>,<br>      <span class="hljs-string">&quot;WithThreadId&quot;</span><br>    ],<br>    <span class="hljs-attr">&quot;Properties&quot;</span>: &#123;<br>      <span class="hljs-attr">&quot;ApplicationName&quot;</span>: <span class="hljs-string">&quot;Serilog.WebApplication&quot;</span><br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="Useful-Enrichers"><a href="#Useful-Enrichers" class="headerlink" title="Useful Enrichers"></a>Useful Enrichers</h2><p>Here’s how to add some of the most useful enrichers.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs bash">Install-Package Serilog.Enrichers.Environment -Version 2.1.3<br>dotnet add package Serilog.Enrichers.Environment --version 2.1.3<br>&lt;PackageReference Include=<span class="hljs-string">&quot;Serilog.Enrichers.Environment&quot;</span> Version=<span class="hljs-string">&quot;2.1.3&quot;</span> /&gt;<br><br>Install-Package Serilog.Enrichers.Process -Version 2.0.2-dev-00731<br>dotnet add package Serilog.Enrichers.Process --version 2.0.2-dev-00731<br>&lt;PackageReference Include=<span class="hljs-string">&quot;Serilog.Enrichers.Process&quot;</span> Version=<span class="hljs-string">&quot;2.0.2-dev-00731&quot;</span> /&gt;<br><br>Install-Package Serilog.Enrichers.Thread -Version 3.2.0-dev-00747<br>dotnet add package Serilog.Enrichers.Thread --version 3.2.0-dev-00747<br>&lt;PackageReference Include=<span class="hljs-string">&quot;Serilog.Enrichers.Thread&quot;</span> Version=<span class="hljs-string">&quot;3.2.0-dev-00747&quot;</span> /&gt;<br><br>Install-Package Serilog.Enrichers.CorrelationId -Version 3.0.1<br>dotnet add package Serilog.Enrichers.CorrelationId --version 3.0.1<br>&lt;PackageReference Include=<span class="hljs-string">&quot;Serilog.Enrichers.CorrelationId&quot;</span> Version=<span class="hljs-string">&quot;3.0.1&quot;</span> /&gt;<br></code></pre></td></tr></table></figure>

<p>Change your <code>Program.Main()</code> as following</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs cs"><span class="hljs-comment">// HERE</span><br><span class="hljs-keyword">var</span> config = <span class="hljs-keyword">new</span> ConfigurationBuilder()<br>    .AddJsonFile(<span class="hljs-string">&quot;appsettings.json&quot;</span>)<br>    .Build();<br>Log.Logger = <span class="hljs-keyword">new</span> LoggerConfiguration()<br>    .MinimumLevel.Verbose()<br>    .Enrich.FromLogContext()<br>    <span class="hljs-comment">// Serilog.Enrichers.Environment</span><br>    .Enrich.WithMachineName()<br>    .Enrich.WithEnvironmentUserName()<br>    <span class="hljs-comment">// Serilog.Enrichers.Process</span><br>    .Enrich.WithProcessId()<br>    .Enrich.WithProcessName()<br>    <span class="hljs-comment">// Serilog.Enrichers.Thread</span><br>    .Enrich.WithThreadId()<br>    .Enrich.WithThreadName()<br>    <span class="hljs-comment">// The &#123;ThreadName&#125; property will only be attached when it is not null. Otherwise it will be omitted. If you want to get this property always attached you can use the following:</span><br>    .Enrich.WithProperty(ThreadNameEnricher.ThreadNamePropertyName, <span class="hljs-string">&quot;MyDefault&quot;</span>)<br>    <span class="hljs-comment">// Serilog.Enrichers.CorrelationId</span><br>    .Enrich.WithCorrelationId()<br>    <span class="hljs-comment">// Change the output template to as following, &#123;Properties&#125; placeholder Collects and displays all of the above enrichers.</span><br>    .WriteTo.Console(outputTemplate: <span class="hljs-string">&quot;&#123;Timestamp:yyyy-MM-dd HH:mm:ss.fff zzz&#125; [&#123;Level:u3&#125;] &#123;Message:lj&#125; &#123;Properties&#125;&#123;NewLine&#125;&#123;Exception&#125;&quot;</span>)<br>    .ReadFrom.Configuration(config)<br>    .CreateLogger();<br></code></pre></td></tr></table></figure>

<p>For <code>Serilog.Enrichers.CorrelationId</code>, you need to add <code>AddHttpContextAccessor</code> too.</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs cs"><span class="hljs-comment">// Startup.ConfigureServices</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ConfigureServices</span>(<span class="hljs-params">IServiceCollection services</span>)</span><br>&#123;<br>    services.AddControllers();<br>    <span class="hljs-comment">// HERE</span><br>    services.AddHttpContextAccessor();<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="Enrich-from-global-properties"><a href="#Enrich-from-global-properties" class="headerlink" title="Enrich from global properties"></a>Enrich from global properties</h2><p>You can also specify properties globally. In some cases, we need to calculate properties on startup, which can be done using the Fluent API:</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs cs">Log.Logger = <span class="hljs-keyword">new</span> LoggerConfiguration()<br>    .Enrich.FromLogContext()<br>    <span class="hljs-comment">// HERE</span><br>    .Enrich.WithProperty(<span class="hljs-string">&quot;Version&quot;</span>, <span class="hljs-keyword">typeof</span>(Program).Assembly.GetName().Version)<br>    <span class="hljs-comment">// &#x27;Version&#x27; is accessible via &#123;Properties&#125;</span><br>    .WriteTo.Console(outputTemplate: <span class="hljs-string">&quot;&#123;Timestamp:yyyy-MM-dd HH:mm:ss.fff zzz&#125; [&#123;Level:u3&#125;] &#123;Message:lj&#125; &#123;Properties&#125;&#123;NewLine&#125;&#123;Exception&#125;&quot;</span>)<br>    .CreateLogger();<br></code></pre></td></tr></table></figure>

<h2 id="Timings"><a href="#Timings" class="headerlink" title="Timings"></a>Timings</h2><p>Serilog’s support for structured data makes it a great way to collect timing information. It’s easy to get started with in development, because the timings are printed to the same output as other log messages (the console, files, etc.) so a metrics server doesn’t have to be available all the time.</p>
<p><code>Serilog Timings</code> is built with some specific requirements in mind:</p>
<p>One operation produces exactly one log event (events are raised at the completion of an operation)<br>Natural and fully-templated messages<br>Events for a single operation have a single event type, across both success and failure cases (only the logging level and Outcome properties change)<br>This keeps noise in the log to a minimum, and makes it easy to extract and manipulate timing information on a per-operation basis.</p>
<p>Install below packages</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">Install-Package SerilogTimings -Version 2.3.0<br>dotnet add package SerilogTimings --version 2.3.0<br>&lt;PackageReference Include=<span class="hljs-string">&quot;SerilogTimings&quot;</span> Version=<span class="hljs-string">&quot;2.3.0&quot;</span> /&gt;<br></code></pre></td></tr></table></figure>

<p>The simplest use case is to time an operation, without explicitly recording success/failure:</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cs"><span class="hljs-keyword">using</span> (Operation.Time(<span class="hljs-string">&quot;Submitting payment for &#123;OrderId&#125;&quot;</span>, order.Id))<br>&#123;<br>    <span class="hljs-comment">// Timed block of code goes here</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>At the completion of the using block, a message will be written to the log like:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">[INF] Submitting payment for order-12345 completed in 456.7 ms<br></code></pre></td></tr></table></figure>

<p>Operations that can either <code>succeed</code> or <code>fail</code>, or that produce a result, can be created with <code>Operation.Begin()</code>:</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs cs"><span class="hljs-keyword">using</span> (<span class="hljs-keyword">var</span> op = Operation.Begin(<span class="hljs-string">&quot;Retrieving orders for &#123;CustomerId&#125;&quot;</span>, customer.Id))<br>&#123;<br>	<span class="hljs-comment">// Timed block of code goes here</span><br><br>	op.Complete();<br>&#125;<br></code></pre></td></tr></table></figure>

<p>Using <code>op.Complete()</code> will produce the same kind of result as in the first example:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">[INF] Retrieving orders for customer-67890 completed in 7.8 ms<br></code></pre></td></tr></table></figure>

<p>If the operation is not completed by calling <code>Complete()</code>, it is assumed to have failed and a warning-level event will be written to the log instead:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">[WRN] Retrieving orders for customer-67890 abandoned in 1234.5 ms<br></code></pre></td></tr></table></figure>

<p>In this case the Outcome property will be “abandoned”.<br>To suppress this message, for example when an operation turns out to be inapplicable, use <code>op.Cancel()</code>. Once <code>Cancel()</code> has been called, no event will be written by the operation on either <code>completion</code> or <code>abandonment</code>.</p>
<p><strong>Levelling</strong></p>
<p>Timings are most useful in production, so timing events are recorded at the Information level and higher, which should generally be collected all the time.</p>
<p>If you truly need <code>Verbose</code> - or <code>Debug</code>-level timings, you can trigger them with <code>Operation.At()</code> or the <code>OperationAt()</code> extension method on <code>ILogger</code>:</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cs"><span class="hljs-keyword">using</span> (Operation.At(LogEventLevel.Debug).Time(<span class="hljs-string">&quot;Preparing zip archive&quot;</span>))<br>&#123;<br>    <span class="hljs-comment">// ...</span><br>&#125;<br></code></pre></td></tr></table></figure>
<p>When a level is specified, both completion and abandonment events will use it. To configure a different abandonment level, pass the second optional parameter to the <code>At()</code> method.</p>
<h2 id="Serilog-amp-Kibana"><a href="#Serilog-amp-Kibana" class="headerlink" title="Serilog &amp; Kibana"></a>Serilog &amp; Kibana</h2><p><code>Kibana</code> is an open source data visualization user interface for ElasticSearch. Think of ElasticSearch as the database and Kibana as the web user interface which you can use to build graphs and query data in ElasticSearch.</p>
<p><strong>Installation</strong></p>
<ol>
<li>Get Elasticsearch</li>
<li>Get Kibana</li>
<li>Start Elasticsearch: <code>bin/elasticsearch</code></li>
<li>Start Kibana: <code>bin/kibana</code></li>
<li>Open Kibana: <code>http://localhost:5601</code></li>
</ol>
<p><strong>ElasticSearch Sink</strong></p>
<p>Install below package</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">Install-Package Serilog.Sinks.ElasticSearch -Version 8.4.1<br>dotnet add package Serilog.Sinks.ElasticSearch --version 8.4.1<br>&lt;PackageReference Include=<span class="hljs-string">&quot;Serilog.Sinks.ElasticSearch&quot;</span> Version=<span class="hljs-string">&quot;8.4.1&quot;</span> /&gt;<br></code></pre></td></tr></table></figure>

<p>After installation, add the following code:</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs cs"><span class="hljs-comment">// Program.cs</span><br><br><span class="hljs-keyword">using</span> Serilog.Formatting.Elasticsearch;<br><span class="hljs-keyword">using</span> Serilog.Sinks.Elasticsearch;<br><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"><span class="hljs-built_in">string</span>[] args</span>)</span><br>&#123;<br>    <span class="hljs-keyword">var</span> environment = Environment.GetEnvironmentVariable(<span class="hljs-string">&quot;ASPNETCORE_ENVIRONMENT&quot;</span>);<br>    <span class="hljs-keyword">var</span> config = BuildConfigurationRoot();<br>    Log.Logger = <span class="hljs-keyword">new</span> LoggerConfiguration()<br>    <br>        <span class="hljs-comment">// HERE     </span><br>        .WriteTo.Elasticsearch(ConfigureElasticSink(config, environment))<br>        <br>        .CreateLogger();<br>    <span class="hljs-keyword">try</span><br>    &#123;<br>        Log.Information(<span class="hljs-string">&quot;Starting up&quot;</span>);<br>        CreateHostBuilder(args).Build().Run();<br>    &#125;<br>    catch (Exception ex)<br>    &#123;<br>        Log.Fatal(ex, <span class="hljs-string">&quot;Application start-up failed&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">finally</span><br>    &#123;<br>        Log.CloseAndFlush();<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// HERE</span><br><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> ElasticsearchSinkOptions <span class="hljs-title">ConfigureElasticSink</span>(<span class="hljs-params">IConfigurationRoot configuration, <span class="hljs-built_in">string</span> environment</span>)</span><br>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ElasticsearchSinkOptions(<span class="hljs-keyword">new</span> Uri(configuration[<span class="hljs-string">&quot;ElasticConfiguration:Uri&quot;</span>]))<br>    &#123;<br>        AutoRegisterTemplate = <span class="hljs-literal">true</span>,<br>        AutoRegisterTemplateVersion = AutoRegisterTemplateVersion.ESv7,<br>        CustomFormatter = <span class="hljs-keyword">new</span> ExceptionAsObjectJsonFormatter(renderMessage: <span class="hljs-literal">true</span>),<br>        <span class="hljs-comment">// Our ElasticSearch index: ASSEMBLYNAME-ENVIROMENT-YEAR-MONTH </span><br>        <span class="hljs-comment">// This index must introduce to ElasticSearch/Kibana</span><br>        IndexFormat = <span class="hljs-string">$&quot;<span class="hljs-subst">&#123;Assembly.GetExecutingAssembly().GetName().Name.ToLower().Replace(<span class="hljs-string">&quot;.&quot;</span>, <span class="hljs-string">&quot;-&quot;</span>)&#125;</span>-<span class="hljs-subst">&#123;environment?.ToLower().Replace(<span class="hljs-string">&quot;.&quot;</span>, <span class="hljs-string">&quot;-&quot;</span>)&#125;</span>-<span class="hljs-subst">&#123;DateTime.UtcNow:yyyy-MM&#125;</span>&quot;</span><br>    &#125;;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>And also in <code>appsettings.json</code></p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cs"><span class="hljs-string">&quot;ElasticConfiguration&quot;</span>: &#123;<br>  <span class="hljs-string">&quot;Uri&quot;</span>: <span class="hljs-string">&quot;http://localhost:9200&quot;</span><br>&#125;,<br></code></pre></td></tr></table></figure>

<p><strong>Define index to Kibana</strong></p>
<p>If this is your first run you will see <code>Create index pattern</code> page so go to step 3 but if you had any index before, start form beggining:</p>
<ol>
<li>Run your application, Then browse the <code>Kibana</code> via <code>http://localhost:5601/app/home/</code>.</li>
<li>Find <code>Connect to your Elasticsearch index</code> link and click on it.</li>
<li>After that, Click on <code>Create index pattern</code> and introduce our index format like below<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">ASSEMBLYNAME-ENVIROMENT-* =&gt; myapp-development-*<br></code></pre></td></tr></table></figure></li>
<li>Click on <code>Next step</code></li>
<li>Choose <code>@timestamp</code>, then click on <code>Create index pattern</code></li>
<li>Now, You can go to <code>Discover</code> page and find your logs!</li>
</ol>
<h2 id="Reference-s"><a href="#Reference-s" class="headerlink" title="Reference(s)"></a>Reference(s)</h2><p>Most of the information in this article has gathered from various references.</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://nblumhardt.com/2019/10/serilog-in-aspnetcore-3/">https://nblumhardt.com/2019/10/serilog-in-aspnetcore-3/</a></li>
<li><a target="_blank" rel="noopener" href="https://www.codewithmukesh.com/blog/serilog-in-aspnet-core-3-1/">https://www.codewithmukesh.com/blog/serilog-in-aspnet-core-3-1/</a></li>
<li><a target="_blank" rel="noopener" href="https://dejanstojanovic.net/aspnet/2018/october/extending-serilog-with-additional-values-to-log/">https://dejanstojanovic.net/aspnet/2018/october/extending-serilog-with-additional-values-to-log/</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/nblumhardt/serilog-timings">https://github.com/nblumhardt/serilog-timings</a></li>
<li><a target="_blank" rel="noopener" href="https://benfoster.io/blog/serilog-best-practices/">https://benfoster.io/blog/serilog-best-practices/</a></li>
<li><a target="_blank" rel="noopener" href="https://esg.dev/posts/serilog-dos-and-donts/">https://esg.dev/posts/serilog-dos-and-donts/</a></li>
<li><a target="_blank" rel="noopener" href="https://www.humankode.com/asp-net-core/logging-with-elasticsearch-kibana-asp-net-core-and-docker">https://www.humankode.com/asp-net-core/logging-with-elasticsearch-kibana-asp-net-core-and-docker</a></li>
</ul>
</div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/dotnet/">dotnet</a><a class="link-muted mr-2" rel="tag" href="/tags/aspnetcore/">aspnetcore</a><a class="link-muted mr-2" rel="tag" href="/tags/webapi/">webapi</a><a class="link-muted mr-2" rel="tag" href="/tags/log/">log</a></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/a-professional-asp.net-core-api-fluent-validation/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">A Professional ASP.NET Core API - FluentValidation</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/a-professional-asp.net-core-api-localization/"><span class="level-item">A Professional ASP.NET Core API - Localization</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1 is-sticky"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="/img/pic.png" alt="Hamed Fathi"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Hamed Fathi</p><p class="is-size-6 is-block">Senior Software Developer</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Austria</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">30</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">4</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">86</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://twitter.com/Hamed__Fathi" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/hamedfathi"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="LinkedIn" href="https://www.linkedin.com/in/hamedfathi"><i class="fab fa-linkedin"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com/Hamed__Fathi"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="StackOverflow" href="https://stackoverflow.com/users/3166171/hamedfathi"><i class="fab fa-stack-overflow"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://www.facebook.com/hamedfathi88"><i class="fab fa-facebook"></i></a></div></div></div><!--!--><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/aspnetcore/"><span class="level-start"><span class="level-item">aspnetcore</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/aspnetcore-api/"><span class="level-start"><span class="level-item">aspnetcore-api</span></span><span class="level-end"><span class="level-item tag">18</span></span></a></li><li><a class="level is-mobile" href="/categories/aurelia/"><span class="level-start"><span class="level-item">aurelia</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/dotnet/"><span class="level-start"><span class="level-item">dotnet</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/amqp/"><span class="tag">amqp</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/api/"><span class="tag">api</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/aspnetcore/"><span class="tag">aspnetcore</span><span class="tag">22</span></a></div><div class="control"><a class="tags has-addons" href="/tags/aurelia2/"><span class="tag">aurelia2</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/awesome/"><span class="tag">awesome</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/backgroundtask/"><span class="tag">backgroundtask</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/binding/"><span class="tag">binding</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/bogus/"><span class="tag">bogus</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/bootstrap5/"><span class="tag">bootstrap5</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/cache/"><span class="tag">cache</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/caching/"><span class="tag">caching</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/chai/"><span class="tag">chai</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/cors/"><span class="tag">cors</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/csharp/"><span class="tag">csharp</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/csharp9/"><span class="tag">csharp9</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/css-in-js/"><span class="tag">css-in-js</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/default-interface-method/"><span class="tag">default-interface-method</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/di/"><span class="tag">di</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/distributed/"><span class="tag">distributed</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/dotnet/"><span class="tag">dotnet</span><span class="tag">26</span></a></div><div class="control"><a class="tags has-addons" href="/tags/dotnet5/"><span class="tag">dotnet5</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/dryioc/"><span class="tag">dryioc</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/e2e/"><span class="tag">e2e</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/easynetq/"><span class="tag">easynetq</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/emotionjs/"><span class="tag">emotionjs</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/end-to-end/"><span class="tag">end-to-end</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/exception/"><span class="tag">exception</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/extension-method/"><span class="tag">extension-method</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/fakedata/"><span class="tag">fakedata</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/feature/"><span class="tag">feature</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/featureflag/"><span class="tag">featureflag</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/featuremanagement/"><span class="tag">featuremanagement</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/file/"><span class="tag">file</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/fluentvalidation/"><span class="tag">fluentvalidation</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/guard/"><span class="tag">guard</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/header/"><span class="tag">header</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/health/"><span class="tag">health</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/healthcheck/"><span class="tag">healthcheck</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/healthy/"><span class="tag">healthy</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/hostedservices/"><span class="tag">hostedservices</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/inmemory/"><span class="tag">inmemory</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ioc/"><span class="tag">ioc</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/jest/"><span class="tag">jest</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/lerna/"><span class="tag">lerna</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/localization/"><span class="tag">localization</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/log/"><span class="tag">log</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/masstransit/"><span class="tag">masstransit</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/messagebroker/"><span class="tag">messagebroker</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/middleware/"><span class="tag">middleware</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/miniprofiler/"><span class="tag">miniprofiler</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/mixon/"><span class="tag">mixon</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/mocha/"><span class="tag">mocha</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/model/"><span class="tag">model</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/modelbinding/"><span class="tag">modelbinding</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/monorepository/"><span class="tag">monorepository</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/openapi/"><span class="tag">openapi</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/pagination/"><span class="tag">pagination</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/paging/"><span class="tag">paging</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/pipeline/"><span class="tag">pipeline</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/plugin/"><span class="tag">plugin</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/polly/"><span class="tag">polly</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/profiler/"><span class="tag">profiler</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/puppeteer/"><span class="tag">puppeteer</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/queue/"><span class="tag">queue</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/rabbitmq/"><span class="tag">rabbitmq</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ratelimit/"><span class="tag">ratelimit</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/redis/"><span class="tag">redis</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/refit/"><span class="tag">refit</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/request/"><span class="tag">request</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/resiliency/"><span class="tag">resiliency</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/response/"><span class="tag">response</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/roslyn/"><span class="tag">roslyn</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/rss/"><span class="tag">rss</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/security/"><span class="tag">security</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sourcegenerator/"><span class="tag">sourcegenerator</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sqlserver/"><span class="tag">sqlserver</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/swagger/"><span class="tag">swagger</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tailwindcss/"><span class="tag">tailwindcss</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/test/"><span class="tag">test</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/testdata/"><span class="tag">testdata</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/unhealthy/"><span class="tag">unhealthy</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/upload/"><span class="tag">upload</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/validation/"><span class="tag">validation</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/versioning/"><span class="tag">versioning</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/webapi/"><span class="tag">webapi</span><span class="tag">20</span></a></div><div class="control"><a class="tags has-addons" href="/tags/webpack/"><span class="tag">webpack</span><span class="tag">1</span></a></div></div></div></div></div><div class="column-right-shadow is-hidden-widescreen is-sticky"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3 is-sticky"><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-07-28T00:00:00.000Z">2023-07-28</time></p><p class="title"><a href="/the-dotnet-world-mixin/">The .NET World - Mixin</a></p><p class="categories"><a href="/categories/dotnet/">dotnet</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-12-08T00:00:00.000Z">2020-12-08</time></p><p class="title"><a href="/the-dotnet-world-csharp-source-generator/">The .NET World - C# Source Generator</a></p><p class="categories"><a href="/categories/dotnet/">dotnet</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-11-09T00:00:00.000Z">2020-11-09</time></p><p class="title"><a href="/write-a-custom-plugin-with-aurelia-2-and-lerna/">Write a custom plugin with Aurelia 2 and Lerna</a></p><p class="categories"><a href="/categories/aurelia/">aurelia</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-10-23T00:00:00.000Z">2020-10-23</time></p><p class="title"><a href="/a-professional-asp.net-core-api-rabbitmq/">A Professional ASP.NET Core API - RabbitMQ</a></p><p class="categories"><a href="/categories/aspnetcore-api/">aspnetcore-api</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-10-22T00:00:00.000Z">2020-10-22</time></p><p class="title"><a href="/a-professional-asp.net-core-rss/">A Professional ASP.NET Core - RSS</a></p><p class="categories"><a href="/categories/aspnetcore/">aspnetcore</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2023/07/"><span class="level-start"><span class="level-item">July 2023</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/12/"><span class="level-start"><span class="level-item">December 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/11/"><span class="level-start"><span class="level-item">November 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/10/"><span class="level-start"><span class="level-item">October 2020</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/09/"><span class="level-start"><span class="level-item">September 2020</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/08/"><span class="level-start"><span class="level-item">August 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/07/"><span class="level-start"><span class="level-item">July 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/04/"><span class="level-start"><span class="level-item">April 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/">Hamed Fathi&#039;s Blog</a><p class="is-size-7"><span>&copy; 2023 Hamed Fathi</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>