<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>A Professional ASP.NET Core API - Versioning - Hamed Fathi&#039;s Blog</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Hamed Fathi&#039;s Blog"><meta name="msapplication-TileImage" content="/img/pic.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Hamed Fathi&#039;s Blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="When developing APIs, you should keep one thing in mind: Change is inevitable. When your API has reached a point where you need to add more responsibilities, you should consider versioning your API. H"><meta property="og:type" content="blog"><meta property="og:title" content="A Professional ASP.NET Core API - Versioning"><meta property="og:url" content="https://hamedfathi.github.io/a-professional-asp.net-core-api-versioning/"><meta property="og:site_name" content="Hamed Fathi&#039;s Blog"><meta property="og:description" content="When developing APIs, you should keep one thing in mind: Change is inevitable. When your API has reached a point where you need to add more responsibilities, you should consider versioning your API. H"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://hamedfathi.github.io/img/og_image.png"><meta property="article:published_time" content="2020-09-21T00:00:00.000Z"><meta property="article:modified_time" content="2023-07-28T08:36:42.662Z"><meta property="article:author" content="Hamed Fathi"><meta property="article:tag" content="dotnet"><meta property="article:tag" content="aspnetcore"><meta property="article:tag" content="webapi"><meta property="article:tag" content="api"><meta property="article:tag" content="versioning"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://hamedfathi.github.io/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://hamedfathi.github.io/a-professional-asp.net-core-api-versioning/"},"headline":"A Professional ASP.NET Core API - Versioning","image":["https://hamedfathi.github.io/img/og_image.png"],"datePublished":"2020-09-21T00:00:00.000Z","dateModified":"2023-07-28T08:36:42.662Z","author":{"@type":"Person","name":"Hamed Fathi"},"publisher":{"@type":"Organization","name":"Hamed Fathi's Blog","logo":{"@type":"ImageObject"}},"description":"When developing APIs, you should keep one thing in mind: Change is inevitable. When your API has reached a point where you need to add more responsibilities, you should consider versioning your API. H"}</script><link rel="canonical" href="https://hamedfathi.github.io/a-professional-asp.net-core-api-versioning/"><link rel="icon" href="/img/pic.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.0.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">Hamed Fathi&#039;s Blog</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/hamedfathi"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2020-09-21T00:00:00.000Z" title="9/21/2020, 12:00:00 AM">2020-09-21</time></span><span class="level-item"><a class="link-muted" href="/categories/aspnetcore-api/">aspnetcore-api</a></span></div></div><h1 class="title is-3 is-size-4-mobile">A Professional ASP.NET Core API - Versioning</h1><div class="content"><p>When developing APIs, you should keep one thing in mind: <strong>Change is inevitable</strong>. When your API has reached a point where you need to add more responsibilities, you should consider versioning your API. Hence you will need a versioning strategy.</p>
<span id="more"></span>

<p>Install the below package</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">Install-Package Microsoft.AspNetCore.Mvc.Versioning -Version 4.1.1<br>dotnet add package Microsoft.AspNetCore.Mvc.Versioning --version 4.1.1<br>&lt;PackageReference Include=<span class="hljs-string">&quot;Microsoft.AspNetCore.Mvc.Versioning&quot;</span> Version=<span class="hljs-string">&quot;4.1.1&quot;</span> /&gt;<br></code></pre></td></tr></table></figure>

<h2 id="Configure-API-versioning"><a href="#Configure-API-versioning" class="headerlink" title="Configure API versioning"></a>Configure API versioning</h2><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs cs"><span class="hljs-comment">// Startup.ConfigureServices</span><br><span class="hljs-keyword">using</span> Microsoft.AspNetCore.Mvc.Versioning;<br><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ConfigureServices</span>(<span class="hljs-params">IServiceCollection services</span>)</span><br>&#123;<br>    services.AddApiVersioning(config =&gt;<br>    &#123;<br>        <span class="hljs-comment">// You can specify the default version as 1.0.</span><br>        config.DefaultApiVersion = <span class="hljs-keyword">new</span> ApiVersion(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>);<br>        <span class="hljs-comment">// Set defaul version if you dont specify it.</span><br>        config.AssumeDefaultVersionWhenUnspecified = <span class="hljs-literal">true</span>;<br>        <span class="hljs-comment">// Let the clients of the API know all supported versions.</span><br>        <span class="hljs-comment">// The consumers could read the &#x27;api-supported-versions&#x27; header.</span><br>        config.ReportApiVersions = <span class="hljs-literal">true</span>;<br>        config.ApiVersionReader = <span class="hljs-keyword">new</span> HeaderApiVersionReader(<span class="hljs-string">&quot;x-api-version&quot;</span>);<br>    &#125;);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>if you don’t set these two configurations</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cs">config.DefaultApiVersion = <span class="hljs-keyword">new</span> ApiVersion(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>);<br>config.AssumeDefaultVersionWhenUnspecified = <span class="hljs-literal">true</span>;<br></code></pre></td></tr></table></figure>

<p>And don’t set any version for your Controller/Action, You will get the following error when you send a request.</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>    <span class="hljs-attr">&quot;error&quot;</span>: &#123;<br>        <span class="hljs-attr">&quot;code&quot;</span>: <span class="hljs-string">&quot;ApiVersionUnspecified&quot;</span>,<br>        <span class="hljs-attr">&quot;message&quot;</span>: <span class="hljs-string">&quot;An API version is required, but was not     </span><br><span class="hljs-string">specified.&quot;</span>,<br>        <span class="hljs-attr">&quot;innerError&quot;</span>: <span class="hljs-literal">null</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="API-Version-Reader"><a href="#API-Version-Reader" class="headerlink" title="API Version Reader"></a>API Version Reader</h2><p>API Version Reader defines how an API version is read from the HTTP request. If not explicitly configured, the default setting is that our API version will be a query string parameter named <code>v</code> (example: ../users?v=2.0). Another, probably more popular option is to store the API version in the HTTP header. We have also the possibility of having an API version both in a query string as well as in an HTTP header.</p>
<p><strong>Query string parameter</strong></p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cs"><span class="hljs-comment">// /api/home?v=2.0</span><br>config.ApiVersionReader = <span class="hljs-keyword">new</span> QueryStringApiVersionReader(<span class="hljs-string">&quot;v&quot;</span>);<br></code></pre></td></tr></table></figure>

<p><strong>HTTP header</strong></p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cs"><span class="hljs-comment">// x-api-version: 2.0</span><br>config.ApiVersionReader = <span class="hljs-keyword">new</span> HeaderApiVersionReader(<span class="hljs-string">&quot;x-api-version&quot;</span>);<br></code></pre></td></tr></table></figure>

<p><strong>Media type</strong></p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs cs"><span class="hljs-comment">// Content-Type: text/plain; charset=utf-8; v=2</span><br><span class="hljs-comment">// Content-Type: application/json; charset=utf-8; v=2</span><br>config.ApiVersionReader = <span class="hljs-keyword">new</span> MediaTypeApiVersionReader();<br><br><span class="hljs-comment">// Content-Type: text/plain; charset=utf-8; version=2</span><br><span class="hljs-comment">// Content-Type: application/json; charset=utf-8; version=2</span><br>config.ApiVersionReader = <span class="hljs-keyword">new</span> MediaTypeApiVersionReader(<span class="hljs-string">&quot;version&quot;</span>));<br></code></pre></td></tr></table></figure>

<p><strong>API Version Reader Composition</strong></p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cs">config.ApiVersionReader = ApiVersionReader.Combine(<br>        <span class="hljs-keyword">new</span> QueryStringApiVersionReader(<span class="hljs-string">&quot;v&quot;</span>),<br>        <span class="hljs-keyword">new</span> HeaderApiVersionReader(<span class="hljs-string">&quot;x-api-version&quot;</span>),<br>        <span class="hljs-keyword">new</span> MediaTypeApiVersionReader(<span class="hljs-string">&quot;version&quot;</span>)<br>);<br></code></pre></td></tr></table></figure>

<p><strong>The URL Path</strong></p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cs"><span class="hljs-comment">// [Route(&quot;api/v&#123;version:apiVersion&#125;/[controller]&quot;)]  </span><br>config.ApiVersionReader = <span class="hljs-keyword">new</span> UrlSegmentApiVersionReader();<br></code></pre></td></tr></table></figure>

<h2 id="Set-version-s-to-Controllers-and-Actions"><a href="#Set-version-s-to-Controllers-and-Actions" class="headerlink" title="Set version(s) to Controllers and Actions"></a>Set version(s) to Controllers and Actions</h2><p>Consider the following example:</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs cs">[<span class="hljs-meta">ApiController</span>]<br><span class="hljs-comment">// api-supported-versions: 1.1, 2.0</span><br><span class="hljs-comment">// api-deprecated-versions: 1.0</span><br>[<span class="hljs-meta">ApiVersion(<span class="hljs-meta-string">&quot;1.0&quot;</span>, Deprecated = true)</span>]<br>[<span class="hljs-meta">ApiVersion(<span class="hljs-meta-string">&quot;1.1&quot;</span>)</span>]<br>[<span class="hljs-meta">ApiVersion(<span class="hljs-meta-string">&quot;2.0&quot;</span>)</span>]<br><span class="hljs-comment">// api/v2/values/4</span><br><span class="hljs-comment">// api/v2.0/values/4</span><br>[<span class="hljs-meta">Route(<span class="hljs-meta-string">&quot;api/v&#123;version:apiVersion&#125;/[controller]&quot;</span>)</span>]<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ValuesController</span> : <span class="hljs-title">ControllerBase</span><br>&#123;<br>    <span class="hljs-comment">// GET api/v1/values</span><br>    [<span class="hljs-meta">HttpGet</span>]<br>    <span class="hljs-keyword">public</span> ActionResult&lt;IEnumerable&lt;<span class="hljs-built_in">string</span>&gt;&gt; Get()<br>    &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">string</span>[] &#123; <span class="hljs-string">&quot;value1&quot;</span>, <span class="hljs-string">&quot;value2&quot;</span> &#125;;<br>    &#125;<br><br>    <span class="hljs-comment">// GET api/v2/values/5</span><br>    <span class="hljs-comment">// GET api/v2.0/values/5</span><br>    [<span class="hljs-meta">HttpGet(<span class="hljs-meta-string">&quot;&#123;id&#125;&quot;</span>)</span>]<br>    [<span class="hljs-meta">MapToApiVersion(<span class="hljs-meta-string">&quot;2.0&quot;</span>)</span>]<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> ActionResult&lt;<span class="hljs-built_in">string</span>&gt; <span class="hljs-title">Get</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> id</span>)</span><br>    &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;value&quot;</span>;<br>    &#125;<br><br>    <span class="hljs-comment">// POST api/v1/values/5</span><br>    <span class="hljs-comment">// POST api/v1.0/values/5</span><br>    <span class="hljs-comment">// POST api/v1.1/values/5</span><br>    <span class="hljs-comment">// POST api/v2/values/5</span><br>    <span class="hljs-comment">// POST api/v2.0/values/5</span><br>    [<span class="hljs-meta">HttpPost(<span class="hljs-meta-string">&quot;&#123;id&#125;&quot;</span>)</span>]<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> ActionResult&lt;<span class="hljs-built_in">string</span>&gt; <span class="hljs-title">Post</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> id</span>)</span><br>    &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;value&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>Tip:</strong> Since no version number is specified to the actions in <code>ValuesController</code>, all the endpoints are assumed to have the default version of <code>1.0</code>.</p>
<p><strong>[ApiVersion(“1.0”, Deprecated = true)]</strong></p>
<p>Annotating our controller with, for example, [ApiVersion(“1.0”)] attribute, means that this controller supports API version 1.0.</p>
<p>To deprecate some version in our API controller, we need to set Deprecated flag to true: [ApiVersion(“1.0”, Deprecated = true)].</p>
<p>In such cases a <code>api-deprecated-versions</code> header will be added to identify deprecated versions.</p>
<p><strong>[ApiVersion(“1.1”)]</strong></p>
<p><strong>[ApiVersion(“2.0”)]</strong></p>
<p>Controllers can support multiple API versions.</p>
<p><strong>[Route(“api/v{version:apiVersion}/[controller]”)]</strong></p>
<p>To implement URL path versioning, You can modify the Route attribute of the controllers to accept API versioning info in the path param.</p>
<p><strong>[MapToApiVersion(“2.0”)]</strong></p>
<p>From the several versions introduced for the controller, you can specify a specific version (eg. version 2.0) for the action. The action is <strong>only</strong> available with this version.</p>
<p>If you try to access it with other versions, you will encounter an <code>UnsupportedApiVersion</code> error.</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>    <span class="hljs-attr">&quot;error&quot;</span>: &#123;<br>        <span class="hljs-attr">&quot;code&quot;</span>: <span class="hljs-string">&quot;UnsupportedApiVersion&quot;</span>,<br>        <span class="hljs-attr">&quot;message&quot;</span>: <span class="hljs-string">&quot;The HTTP resource that matches the request URI &#x27;http://localhost:5000/api/v1.0/values/4&#x27; does not support the API version &#x27;1.0&#x27;.&quot;</span>,<br>        <span class="hljs-attr">&quot;innerError&quot;</span>: <span class="hljs-literal">null</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>[ApiVersionNeutral]</strong></p>
<p>If we have a service that is version-neutral, we will mark that controller with <code>[ApiVersionNeutral]</code> attribute.</p>
<p><strong>How to get the API version inside a controller?</strong></p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cs"><span class="hljs-keyword">var</span> apiVersion = HttpContext.GetRequestedApiVersion();<br></code></pre></td></tr></table></figure>

<p>And also</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword">public</span> IActionResult <span class="hljs-title">Get</span>(<span class="hljs-params"> <span class="hljs-built_in">int</span> id, ApiVersion apiVersion </span>)</span> &#123;&#125;<br></code></pre></td></tr></table></figure>

<h2 id="API-Version-Conventions"><a href="#API-Version-Conventions" class="headerlink" title="API Version Conventions"></a>API Version Conventions</h2><p>Besides attributing our controllers and methods, another way to configure service versioning is with API versioning conventions. There are several reasons why would we use API versioning conventions instead of attributes:</p>
<ul>
<li>Centralized management and application of all service API versions</li>
<li>Apply API versions to services defined by controllers in external .NET assemblies</li>
<li>Dynamically apply API versions from external sources; for example, from the configuration</li>
</ul>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cs">services.AddApiVersioning(config =&gt;<br>&#123;<br>    config.Conventions.Controller&lt;MyController&gt;().HasApiVersion(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>);<br>&#125;);<br></code></pre></td></tr></table></figure>

<p>Here’s an example of setting deprecated API version as well as versioning controller actions:</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs cs">services.AddApiVersioning(config =&gt;<br>&#123;<br>    config.Conventions.Controller&lt;MyController&gt;()	   <br>                       .HasDeprecatedApiVersion(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>)<br>                       .HasApiVersion(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>)<br>                       .HasApiVersion(<span class="hljs-number">2</span>, <span class="hljs-number">0</span>)<br>                       .Action(c =&gt; c.Get1_0()).MapToApiVersion(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>)<br>                       .Action(c =&gt; c.Get1_1()).MapToApiVersion(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>)<br>                       .Action(c =&gt; c.Get2_0()).MapToApiVersion(<span class="hljs-number">2</span>, <span class="hljs-number">0</span>);<br>&#125;);<br></code></pre></td></tr></table></figure>

<p>There is also an option to define custom conventions.There is a <code>IControllerConvention</code> interface for this purpose. Custom conventions are added to the convention builder through the API versioning options:</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cs">services.AddApiVersioning(config =&gt;<br>&#123;<br>    config.Conventions.Add(<span class="hljs-keyword">new</span> MyCustomConvention());<br>&#125;);<br></code></pre></td></tr></table></figure>

<h2 id="How-to-prevent-an-unavailable-or-deprecated-api-version-from-loading"><a href="#How-to-prevent-an-unavailable-or-deprecated-api-version-from-loading" class="headerlink" title="How to prevent an unavailable or deprecated api version from loading?"></a>How to prevent an unavailable or deprecated api version from loading?</h2><p>Consider the following example</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs cs">[<span class="hljs-meta">ApiController</span>]<br>[<span class="hljs-meta">ApiVersion(<span class="hljs-meta-string">&quot;1.1&quot;</span>)</span>]<br>[<span class="hljs-meta">ApiVersion(<span class="hljs-meta-string">&quot;2.0&quot;</span>)</span>]<br>[<span class="hljs-meta">Route(<span class="hljs-meta-string">&quot;api/v&#123;version:apiVersion&#125;/[controller]&quot;</span>)</span>]<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ValuesController</span> : <span class="hljs-title">ControllerBase</span><br>&#123;<br>    <span class="hljs-comment">// GET api/v1/values</span><br>    [<span class="hljs-meta">HttpGet</span>]<br>    [<span class="hljs-meta">MapToApiVersion(<span class="hljs-meta-string">&quot;1.0&quot;</span>)</span>]<br>    <span class="hljs-keyword">public</span> ActionResult&lt;IEnumerable&lt;<span class="hljs-built_in">string</span>&gt;&gt; Get()<br>    &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">string</span>[] &#123; <span class="hljs-string">&quot;value1&quot;</span>, <span class="hljs-string">&quot;value2&quot;</span> &#125;;<br>    &#125;<br><br>    [<span class="hljs-meta">HttpGet(<span class="hljs-meta-string">&quot;&#123;id&#125;&quot;</span>)</span>]<br>    [<span class="hljs-meta">MapToApiVersion(<span class="hljs-meta-string">&quot;2.0&quot;</span>)</span>]<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> ActionResult&lt;<span class="hljs-built_in">string</span>&gt; <span class="hljs-title">Get</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> id</span>)</span><br>    &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;value&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>In this example, we have two valid versions (<code>1.1</code>, <code>2.0</code>) for all actions but the <code>Get()</code> has mapped to version <code>1.0</code> which is invalid for us. We want to prevent this method from loading.</p>
<p>To do this, you should write an <code>ActionFilterAttribute</code> as following</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><code class="hljs cs"><span class="hljs-comment">// UnavailableApiVersion.cs</span><br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">UnavailableApiVersion</span><br>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Code &#123; <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Message &#123; <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; &#125;<br>    <span class="hljs-keyword">public</span> IEnumerable&lt;<span class="hljs-built_in">string</span>&gt; AvailableVersions &#123; <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; &#125;<br>    <span class="hljs-keyword">public</span> IEnumerable&lt;<span class="hljs-built_in">string</span>&gt; DeprecatedVersions &#123; <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">UnavailableApiVersion</span>(<span class="hljs-params"></span>)</span><br>    &#123;<br>        AvailableVersions = <span class="hljs-keyword">new</span> List&lt;<span class="hljs-built_in">string</span>&gt;();<br>        DeprecatedVersions = <span class="hljs-keyword">new</span> List&lt;<span class="hljs-built_in">string</span>&gt;();<br>    &#125;<br>&#125;   <br><br><span class="hljs-comment">// PreventUnavailableApiVersionsAttribute.cs</span><br><br>[<span class="hljs-meta">AttributeUsage(AttributeTargets.Class)</span>]<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">PreventUnavailableApiVersionsAttribute</span> : <span class="hljs-title">ActionFilterAttribute</span><br>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Header &#123; <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; &#125; = <span class="hljs-string">&quot;x-api-version&quot;</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> QueryString &#123; <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; &#125; = <span class="hljs-string">&quot;v&quot;</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> UrlSegment &#123; <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; &#125; = <span class="hljs-string">&quot;version&quot;</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">bool</span> IsADeprecatedVersionValid &#123; <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; &#125; = <span class="hljs-literal">true</span>;<br>    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-built_in">string</span> <span class="hljs-title">GetUrl</span>(<span class="hljs-params">HttpRequest request</span>)</span><br>    &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">$&quot;<span class="hljs-subst">&#123;request.Scheme&#125;</span>://<span class="hljs-subst">&#123;request.Host&#125;</span><span class="hljs-subst">&#123;request.Path&#125;</span><span class="hljs-subst">&#123;request.QueryString&#125;</span>&quot;</span>;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnActionExecuting</span>(<span class="hljs-params">ActionExecutingContext context</span>)</span><br>    &#123;<br>        <span class="hljs-keyword">var</span> props = context.ActionDescriptor.Properties;<br>        <span class="hljs-keyword">var</span> url = GetUrl(context.HttpContext.Request);<br>        <span class="hljs-keyword">var</span> headerVersion = context.HttpContext.Request.Headers.Count(x =&gt; <span class="hljs-built_in">string</span>.Equals(x.Key, Header.Trim(), StringComparison.InvariantCultureIgnoreCase));<br>        <span class="hljs-keyword">var</span> routeVersion = context.RouteData.Values[UrlSegment.Trim()];<br>        <span class="hljs-keyword">var</span> queryVersion = context.HttpContext.Request.QueryString.Value.Trim();<br>        <span class="hljs-keyword">var</span> matchedQuery = queryVersion.Replace(<span class="hljs-string">&quot;?&quot;</span>, <span class="hljs-string">&quot;&quot;</span>).Split(<span class="hljs-string">&#x27;&amp;&#x27;</span>).FirstOrDefault(x =&gt; x.StartsWith(<span class="hljs-string">$&quot;<span class="hljs-subst">&#123;QueryString&#125;</span>=&quot;</span>));<br>        <span class="hljs-keyword">var</span> isSkippable = routeVersion == <span class="hljs-literal">null</span> &amp;&amp; headerVersion == <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-built_in">string</span>.IsNullOrEmpty(matchedQuery);<br>        <span class="hljs-keyword">if</span> (isSkippable) <span class="hljs-keyword">return</span>;<br>        <span class="hljs-keyword">var</span> version = <span class="hljs-string">&quot;&quot;</span>;<br>        <span class="hljs-keyword">if</span> (routeVersion != <span class="hljs-literal">null</span>)<br>        &#123;<br>            version = routeVersion.ToString();<br>        &#125;<br>        <span class="hljs-keyword">if</span> (headerVersion &gt; <span class="hljs-number">0</span>)<br>        &#123;<br>            version = context.HttpContext.Request.Headers[<span class="hljs-string">&quot;x-api-version&quot;</span>].ToString();<br>        &#125;<br>        <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">string</span>.IsNullOrEmpty(matchedQuery))<br>        &#123;<br>            version = matchedQuery.Replace(<span class="hljs-string">$&quot;<span class="hljs-subst">&#123;QueryString&#125;</span>=&quot;</span>, <span class="hljs-string">&quot;&quot;</span>);<br>        &#125;<br>        version = version.Contains(<span class="hljs-string">&#x27;.&#x27;</span>) ? version : <span class="hljs-string">$&quot;<span class="hljs-subst">&#123;version&#125;</span>.0&quot;</span>;<br>        <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> prop <span class="hljs-keyword">in</span> props)<br>        &#123;<br>            <span class="hljs-keyword">var</span> apiVersionModel = prop.Value <span class="hljs-keyword">as</span> ApiVersionModel;<br>            <span class="hljs-keyword">if</span> (apiVersionModel != <span class="hljs-literal">null</span>)<br>            &#123;<br>                <span class="hljs-keyword">if</span> (apiVersionModel.IsApiVersionNeutral) <span class="hljs-keyword">return</span>;<br>                <span class="hljs-keyword">var</span> deprecated = apiVersionModel.DeprecatedApiVersions.Select(x =&gt; x.ToString());<br>                <span class="hljs-keyword">var</span> impl = apiVersionModel.ImplementedApiVersions.Select(x =&gt; x.ToString());<br>                <span class="hljs-keyword">var</span> supported = apiVersionModel.SupportedApiVersions.Select(x =&gt; x.ToString());<br>                <span class="hljs-keyword">var</span> isSupported = IsADeprecatedVersionValid ? impl.Contains(version) : supported.Contains(version);<br>                <span class="hljs-keyword">if</span> (!isSupported)<br>                &#123;<br>                    context.Result = <span class="hljs-keyword">new</span> JsonResult(<span class="hljs-keyword">new</span> UnavailableApiVersion<br>                    &#123;<br>                        Code = <span class="hljs-string">&quot;UnavailableApiVersion&quot;</span>,<br>                        AvailableVersions = supported,<br>                        DeprecatedVersions = deprecated,<br>                        Message = <span class="hljs-string">$&quot;The HTTP resource that matches the request URI &#x27;<span class="hljs-subst">&#123;url&#125;</span>&#x27; does not available via the API version &#x27;<span class="hljs-subst">&#123;version&#125;</span>&#x27;.&quot;</span><br>                    &#125;);<br>                    context.HttpContext.Response.StatusCode = (<span class="hljs-built_in">int</span>)HttpStatusCode.BadRequest;<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>And consume it on top of your controller</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs cs">[<span class="hljs-meta">PreventUnavailableApiVersions</span>]<br>[<span class="hljs-meta">ApiController</span>]<br>[<span class="hljs-meta">ApiVersion(<span class="hljs-meta-string">&quot;1.1&quot;</span>)</span>]<br>[<span class="hljs-meta">ApiVersion(<span class="hljs-meta-string">&quot;2.0&quot;</span>)</span>]<br>[<span class="hljs-meta">Route(<span class="hljs-meta-string">&quot;api/v&#123;version:apiVersion&#125;/[controller]&quot;</span>)</span>]<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ValuesController</span> : <span class="hljs-title">ControllerBase</span><br>&#123;<br>    <span class="hljs-comment">// GET api/v1/values</span><br>    [<span class="hljs-meta">HttpGet</span>]<br>    [<span class="hljs-meta">MapToApiVersion(<span class="hljs-meta-string">&quot;1.0&quot;</span>)</span>]<br>    <span class="hljs-keyword">public</span> ActionResult&lt;IEnumerable&lt;<span class="hljs-built_in">string</span>&gt;&gt; Get()<br>    &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">string</span>[] &#123; <span class="hljs-string">&quot;value1&quot;</span>, <span class="hljs-string">&quot;value2&quot;</span> &#125;;<br>    &#125;<br><br>    [<span class="hljs-meta">HttpGet(<span class="hljs-meta-string">&quot;&#123;id&#125;&quot;</span>)</span>]<br>    [<span class="hljs-meta">MapToApiVersion(<span class="hljs-meta-string">&quot;2.0&quot;</span>)</span>]<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> ActionResult&lt;<span class="hljs-built_in">string</span>&gt; <span class="hljs-title">Get</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> id</span>)</span><br>    &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;value&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>Now, whenever you call the <code>Get()</code> action, the <code>PreventUnavailableApiVersions</code> checks the version you requested (<code>1.0</code>) with versions  of your controller (<code>1.1</code>, <code>2.0</code>), If the requested version is not in the list, it returns the same error as below.</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-comment">// Status code: 400 Bad Request</span><br>&#123;<br>    <span class="hljs-attr">&quot;code&quot;</span>: <span class="hljs-string">&quot;UnavailableApiVersion&quot;</span>,<br>    <span class="hljs-attr">&quot;message&quot;</span>: <span class="hljs-string">&quot;The HTTP resource that matches the request URI &#x27;http://localhost:5000/api/v1/WeatherForecast?v=1.0&#x27; does not available by the API version &#x27;1.0&#x27;.&quot;</span>,<br>    <span class="hljs-attr">&quot;availableVersions&quot;</span>: [<br>        <span class="hljs-string">&quot;1.1&quot;</span>,<br>        <span class="hljs-string">&quot;2.0&quot;</span><br>    ],<br>    <span class="hljs-attr">&quot;deprecatedVersions&quot;</span>: [<br>        <span class="hljs-string">&quot;1.0&quot;</span><br>    ]<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>Deprecated versions</strong></p>
<p>As a default behaviour deprecated versions are in valid list it means if you write like the below code</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs cs">[<span class="hljs-meta">PreventUnavailableApiVersions</span>]<br>[<span class="hljs-meta">ApiController</span>]<br>[<span class="hljs-meta">ApiVersion(<span class="hljs-meta-string">&quot;1.0&quot;</span>, Deprecated = true)</span>]<br>[<span class="hljs-meta">ApiVersion(<span class="hljs-meta-string">&quot;1.1&quot;</span>)</span>]<br>[<span class="hljs-meta">ApiVersion(<span class="hljs-meta-string">&quot;2.0&quot;</span>)</span>]<br>[<span class="hljs-meta">Route(<span class="hljs-meta-string">&quot;api/v&#123;version:apiVersion&#125;/[controller]&quot;</span>)</span>]<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ValuesController</span> : <span class="hljs-title">ControllerBase</span><br>&#123;<br>    <span class="hljs-comment">// GET api/v1/values</span><br>    [<span class="hljs-meta">HttpGet</span>]<br>    [<span class="hljs-meta">MapToApiVersion(<span class="hljs-meta-string">&quot;1.0&quot;</span>)</span>]<br>    <span class="hljs-keyword">public</span> ActionResult&lt;IEnumerable&lt;<span class="hljs-built_in">string</span>&gt;&gt; Get()<br>    &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">string</span>[] &#123; <span class="hljs-string">&quot;value1&quot;</span>, <span class="hljs-string">&quot;value2&quot;</span> &#125;;<br>    &#125;<br><br>    [<span class="hljs-meta">HttpGet(<span class="hljs-meta-string">&quot;&#123;id&#125;&quot;</span>)</span>]<br>    [<span class="hljs-meta">MapToApiVersion(<span class="hljs-meta-string">&quot;2.0&quot;</span>)</span>]<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> ActionResult&lt;<span class="hljs-built_in">string</span>&gt; <span class="hljs-title">Get</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> id</span>)</span><br>    &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;value&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>You will see the result of action method without any unavailable error but you can config to remove deprecated versions from list of valid versions.<br>You just need to write</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cs"><span class="hljs-comment">// IsADeprecatedVersionValid: default is true</span><br>[<span class="hljs-meta">PreventUnavailableApiVersions(IsADeprecatedVersionValid = false)</span>]<br></code></pre></td></tr></table></figure>

<p>Now, the action filter consider the version <code>1.0</code> as an unavailable and you will get an <code>UnavailableApiVersion</code> response.</p>
<p><strong>Configuration</strong></p>
<p><code>PreventUnavailableApiVersions</code> action filter supports <code>header</code>, <code>query string</code> and <code>url segment</code> mode so you can configure any of these just like what you did in <code>ApiVersionReader</code>.</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs cs"><span class="hljs-comment">// Default is &#x27;v&#x27;</span><br><span class="hljs-comment">// QueryStringApiVersionReader(&quot;ver&quot;)</span><br>[<span class="hljs-meta">PreventUnavailableApiVersions(QueryString = <span class="hljs-meta-string">&quot;ver&quot;</span>)</span>] <br><br><span class="hljs-comment">// Default is &#x27;x-api-version&#x27;</span><br><span class="hljs-comment">// HeaderApiVersionReader(&quot;api-version-header&quot;)</span><br>[<span class="hljs-meta">PreventUnavailableApiVersions(Header = <span class="hljs-meta-string">&quot;api-version-header&quot;</span>)</span>]<br><br><span class="hljs-comment">// UrlSegmentApiVersionReader</span><br><span class="hljs-comment">// Default is &#x27;version&#x27;, [Route(&quot;api/v&#123;version:apiVersion&#125;/[controller]&quot;)]</span><br><span class="hljs-comment">// [Route(&quot;api/v&#123;myversion:apiVersion&#125;/[controller]&quot;)]</span><br>[<span class="hljs-meta">PreventUnavailableApiVersions(UrlSegment = <span class="hljs-meta-string">&quot;myversion&quot;</span>)</span>] <br></code></pre></td></tr></table></figure>

<p><strong>A Second way!</strong></p>
<p>Always you can find an easier way so you can rewrite the above action filter as following</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><code class="hljs cs">[<span class="hljs-meta">AttributeUsage(AttributeTargets.Class | AttributeTargets.Method)</span>]<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">UnavailableApiVersionsAttribute</span> : <span class="hljs-title">ActionFilterAttribute</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-built_in">string</span> <span class="hljs-title">GetUrl</span>(<span class="hljs-params">HttpRequest request</span>)</span><br>    &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">$&quot;<span class="hljs-subst">&#123;request.Scheme&#125;</span>://<span class="hljs-subst">&#123;request.Host&#125;</span><span class="hljs-subst">&#123;request.Path&#125;</span><span class="hljs-subst">&#123;request.QueryString&#125;</span>&quot;</span>;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-built_in">string</span> <span class="hljs-title">FixVersion</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> version</span>)</span><br>    &#123;<br>        <span class="hljs-keyword">var</span> v = version.Contains(<span class="hljs-string">&#x27;.&#x27;</span>) ? version : <span class="hljs-string">$&quot;<span class="hljs-subst">&#123;version&#125;</span>.0&quot;</span>;<br>        <span class="hljs-keyword">return</span> v.Trim();<br>    &#125;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> <span class="hljs-built_in">string</span> _commaSeparatedVersions;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">UnavailableApiVersionsAttribute</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> commaSeparatedVersions</span>)</span><br>    &#123;<br>        _commaSeparatedVersions = commaSeparatedVersions;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Header &#123; <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; &#125; = <span class="hljs-string">&quot;x-api-version&quot;</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> QueryString &#123; <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; &#125; = <span class="hljs-string">&quot;v&quot;</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> UrlSegment &#123; <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; &#125; = <span class="hljs-string">&quot;version&quot;</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">bool</span> IsADeprecatedVersionValid &#123; <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; &#125; = <span class="hljs-literal">true</span>;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnActionExecuting</span>(<span class="hljs-params">ActionExecutingContext context</span>)</span><br>    &#123;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">string</span>.IsNullOrEmpty(_commaSeparatedVersions)) <span class="hljs-keyword">return</span>;<br>        <span class="hljs-keyword">var</span> props = context.ActionDescriptor.Properties;<br>        <span class="hljs-keyword">var</span> url = GetUrl(context.HttpContext.Request);<br>        <span class="hljs-keyword">var</span> headerVersion = context.HttpContext.Request.Headers.Count(x =&gt; <span class="hljs-built_in">string</span>.Equals(x.Key, Header.Trim(), StringComparison.InvariantCultureIgnoreCase));<br>        <span class="hljs-keyword">var</span> routeVersion = context.RouteData.Values[UrlSegment.Trim()];<br>        <span class="hljs-keyword">var</span> queryVersion = context.HttpContext.Request.QueryString.Value.Trim();<br>        <span class="hljs-keyword">var</span> matchedQuery = queryVersion.Replace(<span class="hljs-string">&quot;?&quot;</span>, <span class="hljs-string">&quot;&quot;</span>).Split(<span class="hljs-string">&#x27;&amp;&#x27;</span>).FirstOrDefault(x =&gt; x.StartsWith(<span class="hljs-string">$&quot;<span class="hljs-subst">&#123;QueryString&#125;</span>=&quot;</span>));<br>        <span class="hljs-keyword">var</span> isSkippable = routeVersion == <span class="hljs-literal">null</span> &amp;&amp; headerVersion == <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-built_in">string</span>.IsNullOrEmpty(matchedQuery);<br>        <span class="hljs-keyword">if</span> (isSkippable) <span class="hljs-keyword">return</span>;<br>        <span class="hljs-keyword">var</span> version = <span class="hljs-string">&quot;&quot;</span>;<br>        <span class="hljs-keyword">if</span> (routeVersion != <span class="hljs-literal">null</span>)<br>        &#123;<br>            version = routeVersion.ToString();<br>        &#125;<br>        <span class="hljs-keyword">if</span> (headerVersion &gt; <span class="hljs-number">0</span>)<br>        &#123;<br>            version = context.HttpContext.Request.Headers[<span class="hljs-string">&quot;x-api-version&quot;</span>].ToString();<br>        &#125;<br>        <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">string</span>.IsNullOrEmpty(matchedQuery))<br>        &#123;<br>            version = matchedQuery.Replace(<span class="hljs-string">$&quot;<span class="hljs-subst">&#123;QueryString&#125;</span>=&quot;</span>, <span class="hljs-string">&quot;&quot;</span>);<br>        &#125;<br>        version = FixVersion(version);<br>        <span class="hljs-keyword">var</span> unavailableVersions = _commaSeparatedVersions.Split(<span class="hljs-string">&#x27;,&#x27;</span>).Select(x =&gt; FixVersion(x.Trim()));<br>        <span class="hljs-keyword">var</span> isUnavailableVersion =  unavailableVersions.Contains(version);<br>        <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> prop <span class="hljs-keyword">in</span> props)<br>        &#123;<br>            <span class="hljs-keyword">var</span> apiVersionModel = prop.Value <span class="hljs-keyword">as</span> ApiVersionModel;<br>            <span class="hljs-keyword">if</span> (apiVersionModel != <span class="hljs-literal">null</span>)<br>            &#123;<br>                <span class="hljs-keyword">if</span> (apiVersionModel.IsApiVersionNeutral) <span class="hljs-keyword">return</span>;<br>                <span class="hljs-keyword">var</span> deprecated = apiVersionModel.DeprecatedApiVersions.Select(x =&gt; x.ToString());<br>                <span class="hljs-keyword">var</span> supported = IsADeprecatedVersionValid ?<br>                    apiVersionModel.SupportedApiVersions.Select(x =&gt; x.ToString()).Concat(deprecated).Except(unavailableVersions) :<br>                    apiVersionModel.SupportedApiVersions.Select(x =&gt; x.ToString()).Except(unavailableVersions);<br>                <span class="hljs-keyword">if</span>(!isUnavailableVersion &amp;&amp; !IsADeprecatedVersionValid)<br>                &#123;<br>                    isUnavailableVersion = deprecated.Contains(version);<br>                &#125;<br>                <span class="hljs-keyword">if</span> (isUnavailableVersion)<br>                &#123;<br>                    context.Result = <span class="hljs-keyword">new</span> JsonResult(<span class="hljs-keyword">new</span> UnavailableApiVersion<br>                    &#123;<br>                        Code = <span class="hljs-string">&quot;UnavailableApiVersion&quot;</span>,<br>                        AvailableVersions = supported,<br>                        DeprecatedVersions = deprecated,<br>                        Message = <span class="hljs-string">$&quot;The HTTP resource that matches the request URI &#x27;<span class="hljs-subst">&#123;url&#125;</span>&#x27; does not available via the API version &#x27;<span class="hljs-subst">&#123;version&#125;</span>&#x27;.&quot;</span><br>                    &#125;);<br>                    context.HttpContext.Response.StatusCode = (<span class="hljs-built_in">int</span>)HttpStatusCode.BadRequest;<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><code>UnavailableApiVersions</code> attribute get a comma-separated versions via constructor just on action methods. When you use this action filter you cannot access to the api via these forbidden versions.</p>
<p>So you should consume it like below code</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs cs">[<span class="hljs-meta">ApiController</span>]<br>[<span class="hljs-meta">ApiVersion(<span class="hljs-meta-string">&quot;1.0&quot;</span>, Deprecated = true)</span>]<br>[<span class="hljs-meta">ApiVersion(<span class="hljs-meta-string">&quot;1.1&quot;</span>)</span>]<br>[<span class="hljs-meta">ApiVersion(<span class="hljs-meta-string">&quot;2.0&quot;</span>)</span>]<br>[<span class="hljs-meta">Route(<span class="hljs-meta-string">&quot;api/v&#123;version:apiVersion&#125;/[controller]&quot;</span>)</span>]<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ValuesController</span> : <span class="hljs-title">ControllerBase</span><br>&#123;<br>    <span class="hljs-comment">// GET api/v1/values</span><br>    [<span class="hljs-meta">HttpGet</span>]<br>    [<span class="hljs-meta">MapToApiVersion(<span class="hljs-meta-string">&quot;1.0&quot;</span>)</span>]<br>    [<span class="hljs-meta">UnavailableApiVersions(<span class="hljs-meta-string">&quot;1.0,1.1&quot;</span>)</span>]<br>    <span class="hljs-keyword">public</span> ActionResult&lt;IEnumerable&lt;<span class="hljs-built_in">string</span>&gt;&gt; Get()<br>    &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">string</span>[] &#123; <span class="hljs-string">&quot;value1&quot;</span>, <span class="hljs-string">&quot;value2&quot;</span> &#125;;<br>    &#125;<br><br>    [<span class="hljs-meta">HttpGet(<span class="hljs-meta-string">&quot;&#123;id&#125;&quot;</span>)</span>]<br>    [<span class="hljs-meta">MapToApiVersion(<span class="hljs-meta-string">&quot;2.0&quot;</span>)</span>]<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> ActionResult&lt;<span class="hljs-built_in">string</span>&gt; <span class="hljs-title">Get</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> id</span>)</span><br>    &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;value&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>You can use <code>UnavailableApiVersionsAttribute</code> on any controller or action method.</p>
<p><strong>Global registration</strong></p>
<p>Also, You are able to register the <code>UnavailableApiVersionsAttribute</code> filter globally.</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cs"><span class="hljs-comment">// Startup.ConfigureServices</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ConfigureServices</span>(<span class="hljs-params">IServiceCollection services</span>)</span><br>&#123;<br>    services.AddControllers(options =&gt;<br>    &#123;<br>        <span class="hljs-comment">// HERE</span><br>        options.Filters.Add(<span class="hljs-keyword">new</span> UnavailableApiVersionsAttribute(<span class="hljs-string">&quot;1.0,1.1&quot;</span>) &#123; IsADeprecatedVersionValid = <span class="hljs-literal">false</span> &#125;);<br>    &#125;);<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="Swagger-integration"><a href="#Swagger-integration" class="headerlink" title="Swagger integration"></a>Swagger integration</h2><p>Install the below packages</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">Install-Package Microsoft.AspNetCore.Mvc.Versioning.ApiExplorer -Version 4.1.1<br>dotnet add package Microsoft.AspNetCore.Mvc.Versioning.ApiExplorer --version 4.1.1<br>&lt;PackageReference Include=<span class="hljs-string">&quot;Microsoft.AspNetCore.Mvc.Versioning.ApiExplorer&quot;</span> Version=<span class="hljs-string">&quot;4.1.1&quot;</span> /&gt;<br></code></pre></td></tr></table></figure>

<p>Add <code>ConfigureSwaggerOptions</code> to make some custom options.</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs cs"><span class="hljs-comment">// ConfigureSwaggerOptions.cs</span><br><br><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br><span class="hljs-comment"><span class="hljs-doctag">///</span>     Configures the Swagger generation options.</span><br><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span><br><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;remarks&gt;</span></span><br><span class="hljs-comment"><span class="hljs-doctag">///</span>     This allows API versioning to define aSwagger document per API version after the</span><br><span class="hljs-comment"><span class="hljs-doctag">///</span>     <span class="hljs-doctag">&lt;see cref=&quot;IApiVersionDescriptionProvider&quot; /&gt;</span>service has been resolved from the service container.</span><br><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/remarks&gt;</span></span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">sealed</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ConfigureSwaggerOptions</span> :<span class="hljs-title">IConfigureOptions</span>&lt;<span class="hljs-title">SwaggerGenOptions</span>&gt;<br>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> IApiVersionDescriptionProvider _provider;<br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span>     Initializes a new instance of the <span class="hljs-doctag">&lt;see cref=&quot;ConfigureSwaggerOptions&quot; /&gt;</span> class.</span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;param name=&quot;provider&quot;&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span>     The <span class="hljs-doctag">&lt;see cref=&quot;IApiVersionDescriptionProvider&quot;&gt;</span>provider<span class="hljs-doctag">&lt;/see&gt;</span> used to generate Swagger</span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span>     documents.</span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/param&gt;</span></span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">ConfigureSwaggerOptions</span>(<span class="hljs-params">IApiVersionDescriptionProvider provider</span>)</span> =&gt; _provider = provider;<br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;inheritdoc /&gt;</span></span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Configure</span>(<span class="hljs-params">SwaggerGenOptions options</span>)</span><br>    &#123;<br>        <span class="hljs-comment">// add a swagger document for each discovered API version</span><br>        <span class="hljs-comment">// note: you might choose to skip or document deprecated API versions differently</span><br>        <span class="hljs-keyword">foreach</span> (ApiVersionDescription description <span class="hljs-keyword">in</span> _provider.ApiVersionDescriptions)<br>        &#123;<br>            options.SwaggerDoc(description.GroupName, CreateInfoForApiVersion(description));<br>        &#125;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> OpenApiInfo <span class="hljs-title">CreateInfoForApiVersion</span>(<span class="hljs-params">ApiVersionDescription description</span>)</span><br>    &#123;<br>        <span class="hljs-keyword">var</span> info = <span class="hljs-keyword">new</span> OpenApiInfo<br>        &#123;<br>            Title = <span class="hljs-string">&quot;A Web API&quot;</span>,<br>            Version = description.ApiVersion.ToString(),<br>            Description = <span class="hljs-string">&quot;An API sample.&quot;</span>,<br>            Contact = <span class="hljs-keyword">new</span> OpenApiContact &#123; Name = <span class="hljs-string">&quot;hamedfathi&quot;</span>, Email = <span class="hljs-string">&quot;hamedfathi@outlook.com&quot;</span> &#125;,<br>            TermsOfService = <span class="hljs-keyword">new</span> Uri(<span class="hljs-string">&quot;https://hamedfathi.me&quot;</span>),<br>            License = <span class="hljs-keyword">new</span> OpenApiLicense<br>            &#123;<br>                Name = <span class="hljs-string">&quot;MIT License&quot;</span>,<br>                Url = <span class="hljs-keyword">new</span> Uri(<span class="hljs-string">&quot;https://opensource.org/licenses/MIT&quot;</span>)<br>            &#125;<br>        &#125;;<br>        <span class="hljs-keyword">if</span> (description.IsDeprecated)<br>        &#123;<br>            info.Description += <span class="hljs-string">&quot; This API version has been deprecated.&quot;</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> info;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>Modify your <code>Startup.cs</code> as following</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs cs"><span class="hljs-comment">// Startup.ConfigureServices</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ConfigureServices</span>(<span class="hljs-params">IServiceCollection services</span>)</span><br>&#123;<br>    services.AddControllers();<br><br>    services.AddTransient&lt;IConfigureOptions&lt;SwaggerGenOptions&gt;, ConfigureSwaggerOptions&gt;();<br>    services.AddSwaggerGen(c =&gt;<br>    &#123;<br>        <span class="hljs-keyword">var</span> xmlFile = <span class="hljs-string">$&quot;<span class="hljs-subst">&#123;Assembly.GetExecutingAssembly().GetName().Name&#125;</span>.xml&quot;</span>;<br>        <span class="hljs-keyword">var</span> xmlPath = Path.Combine(AppContext.BaseDirectory, xmlFile);<br>        c.IncludeXmlComments(xmlPath);<br>    &#125;); <br>	services.AddApiVersioning(config =&gt;<br>    &#123;<br>        config.DefaultApiVersion = <span class="hljs-keyword">new</span> ApiVersion(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>);<br>        config.AssumeDefaultVersionWhenUnspecified = <span class="hljs-literal">true</span>;<br>        config.ReportApiVersions = <span class="hljs-literal">true</span>;<br>        config.ApiVersionReader = <span class="hljs-keyword">new</span> UrlSegmentApiVersionReader();<br>    &#125;);<br>    services.AddVersionedApiExplorer(<br>       options =&gt;<br>       &#123;<br>           <span class="hljs-comment">// add the versioned api explorer, which also adds IApiVersionDescriptionProvider service</span><br>           <span class="hljs-comment">// note: the specified format code will format the version as &quot;&#x27;v&#x27;major[.minor][-status]&quot;</span><br>           options.GroupNameFormat = <span class="hljs-string">&quot;&#x27;v&#x27;VVV&quot;</span>;<br><br>           <span class="hljs-comment">// note: this option is only necessary when versioning by url segment. the SubstitutionFormat</span><br>           <span class="hljs-comment">// can also be used to control the format of the API version in route templates</span><br>           options.SubstituteApiVersionInUrl = <span class="hljs-literal">true</span>;<br>       &#125;);<br><br>&#125;<br><br><span class="hljs-comment">// Startup.Configure</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Configure</span>(<span class="hljs-params">IApplicationBuilder app, IWebHostEnvironment env, IApiVersionDescriptionProvider provider</span>)</span><br>&#123;<br>    app.UseSwagger();<br>    app.UseSwaggerUI(<br>        options =&gt;<br>        &#123;<br>            <span class="hljs-keyword">foreach</span> (ApiVersionDescription description <span class="hljs-keyword">in</span> provider.ApiVersionDescriptions)<br>            &#123;<br>                <span class="hljs-built_in">string</span> swaggerEndpoint;<br><br>                <span class="hljs-built_in">string</span> basePath = Configuration[<span class="hljs-string">&quot;ASPNETCORE_BASEPATH&quot;</span>];<br>                Console.WriteLine(<span class="hljs-string">&quot;PATH: &quot;</span> + basePath);<br>                <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">string</span>.IsNullOrEmpty(basePath))<br>                &#123;<br>                    swaggerEndpoint = <span class="hljs-string">$&quot;<span class="hljs-subst">&#123;basePath&#125;</span>/swagger/<span class="hljs-subst">&#123;description.GroupName&#125;</span>/swagger.json&quot;</span>;<br>                &#125;<br>                <span class="hljs-keyword">else</span><br>                &#123;<br>                    swaggerEndpoint = <span class="hljs-string">$&quot;/swagger/<span class="hljs-subst">&#123;description.GroupName&#125;</span>/swagger.json&quot;</span>;<br>                &#125;<br><br>                options.SwaggerEndpoint(swaggerEndpoint, description.GroupName.ToUpperInvariant());<br>            &#125;<br>        &#125;);<br><br>    app.UseRouting();<br>    app.UseAuthorization();<br>    app.UseEndpoints(endpoints =&gt;<br>    &#123;<br>        endpoints.MapControllers();<br>    &#125;);<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="Reference-s"><a href="#Reference-s" class="headerlink" title="Reference(s)"></a>Reference(s)</h2><p>Most of the information in this article has gathered from various references.</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.infoworld.com/article/3562355/how-to-use-api-versioning-in-aspnet-core.html">https://www.infoworld.com/article/3562355/how-to-use-api-versioning-in-aspnet-core.html</a></li>
<li><a target="_blank" rel="noopener" href="https://dev.to/99darshan/restful-web-api-versioning-with-asp-net-core-1e8g">https://dev.to/99darshan/restful-web-api-versioning-with-asp-net-core-1e8g</a></li>
<li><a target="_blank" rel="noopener" href="https://dotnetcoretutorials.com/2017/01/17/api-versioning-asp-net-core/">https://dotnetcoretutorials.com/2017/01/17/api-versioning-asp-net-core/</a></li>
<li><a target="_blank" rel="noopener" href="https://exceptionnotfound.net/overview-of-api-versioning-in-asp-net-core-3-0/">https://exceptionnotfound.net/overview-of-api-versioning-in-asp-net-core-3-0/</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/microsoft/aspnet-api-versioning/wiki/API-Version-Reader">https://github.com/microsoft/aspnet-api-versioning/wiki/API-Version-Reader</a></li>
<li></li>
</ul>
</div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/dotnet/">dotnet</a><a class="link-muted mr-2" rel="tag" href="/tags/aspnetcore/">aspnetcore</a><a class="link-muted mr-2" rel="tag" href="/tags/webapi/">webapi</a><a class="link-muted mr-2" rel="tag" href="/tags/api/">api</a><a class="link-muted mr-2" rel="tag" href="/tags/versioning/">versioning</a></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/a-professional-asp.net-core-api-security-headers/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">A Professional ASP.NET Core API - Security Headers</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/a-professional-asp.net-core-api-cors/"><span class="level-item">A Professional ASP.NET Core API - CORS</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1 is-sticky"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="/img/pic.png" alt="Hamed Fathi"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Hamed Fathi</p><p class="is-size-6 is-block">Senior Software Developer</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Austria</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">30</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">4</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">86</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://twitter.com/Hamed__Fathi" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/hamedfathi"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="LinkedIn" href="https://www.linkedin.com/in/hamedfathi"><i class="fab fa-linkedin"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com/Hamed__Fathi"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="StackOverflow" href="https://stackoverflow.com/users/3166171/hamedfathi"><i class="fab fa-stack-overflow"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://www.facebook.com/hamedfathi88"><i class="fab fa-facebook"></i></a></div></div></div><!--!--><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/aspnetcore/"><span class="level-start"><span class="level-item">aspnetcore</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/aspnetcore-api/"><span class="level-start"><span class="level-item">aspnetcore-api</span></span><span class="level-end"><span class="level-item tag">18</span></span></a></li><li><a class="level is-mobile" href="/categories/aurelia/"><span class="level-start"><span class="level-item">aurelia</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/dotnet/"><span class="level-start"><span class="level-item">dotnet</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/amqp/"><span class="tag">amqp</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/api/"><span class="tag">api</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/aspnetcore/"><span class="tag">aspnetcore</span><span class="tag">22</span></a></div><div class="control"><a class="tags has-addons" href="/tags/aurelia2/"><span class="tag">aurelia2</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/awesome/"><span class="tag">awesome</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/backgroundtask/"><span class="tag">backgroundtask</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/binding/"><span class="tag">binding</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/bogus/"><span class="tag">bogus</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/bootstrap5/"><span class="tag">bootstrap5</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/cache/"><span class="tag">cache</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/caching/"><span class="tag">caching</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/chai/"><span class="tag">chai</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/cors/"><span class="tag">cors</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/csharp/"><span class="tag">csharp</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/csharp9/"><span class="tag">csharp9</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/css-in-js/"><span class="tag">css-in-js</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/default-interface-method/"><span class="tag">default-interface-method</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/di/"><span class="tag">di</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/distributed/"><span class="tag">distributed</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/dotnet/"><span class="tag">dotnet</span><span class="tag">26</span></a></div><div class="control"><a class="tags has-addons" href="/tags/dotnet5/"><span class="tag">dotnet5</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/dryioc/"><span class="tag">dryioc</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/e2e/"><span class="tag">e2e</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/easynetq/"><span class="tag">easynetq</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/emotionjs/"><span class="tag">emotionjs</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/end-to-end/"><span class="tag">end-to-end</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/exception/"><span class="tag">exception</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/extension-method/"><span class="tag">extension-method</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/fakedata/"><span class="tag">fakedata</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/feature/"><span class="tag">feature</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/featureflag/"><span class="tag">featureflag</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/featuremanagement/"><span class="tag">featuremanagement</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/file/"><span class="tag">file</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/fluentvalidation/"><span class="tag">fluentvalidation</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/guard/"><span class="tag">guard</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/header/"><span class="tag">header</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/health/"><span class="tag">health</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/healthcheck/"><span class="tag">healthcheck</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/healthy/"><span class="tag">healthy</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/hostedservices/"><span class="tag">hostedservices</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/inmemory/"><span class="tag">inmemory</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ioc/"><span class="tag">ioc</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/jest/"><span class="tag">jest</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/lerna/"><span class="tag">lerna</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/localization/"><span class="tag">localization</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/log/"><span class="tag">log</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/masstransit/"><span class="tag">masstransit</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/messagebroker/"><span class="tag">messagebroker</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/middleware/"><span class="tag">middleware</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/miniprofiler/"><span class="tag">miniprofiler</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/mixon/"><span class="tag">mixon</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/mocha/"><span class="tag">mocha</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/model/"><span class="tag">model</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/modelbinding/"><span class="tag">modelbinding</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/monorepository/"><span class="tag">monorepository</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/openapi/"><span class="tag">openapi</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/pagination/"><span class="tag">pagination</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/paging/"><span class="tag">paging</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/pipeline/"><span class="tag">pipeline</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/plugin/"><span class="tag">plugin</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/polly/"><span class="tag">polly</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/profiler/"><span class="tag">profiler</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/puppeteer/"><span class="tag">puppeteer</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/queue/"><span class="tag">queue</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/rabbitmq/"><span class="tag">rabbitmq</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ratelimit/"><span class="tag">ratelimit</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/redis/"><span class="tag">redis</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/refit/"><span class="tag">refit</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/request/"><span class="tag">request</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/resiliency/"><span class="tag">resiliency</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/response/"><span class="tag">response</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/roslyn/"><span class="tag">roslyn</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/rss/"><span class="tag">rss</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/security/"><span class="tag">security</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sourcegenerator/"><span class="tag">sourcegenerator</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sqlserver/"><span class="tag">sqlserver</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/swagger/"><span class="tag">swagger</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tailwindcss/"><span class="tag">tailwindcss</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/test/"><span class="tag">test</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/testdata/"><span class="tag">testdata</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/unhealthy/"><span class="tag">unhealthy</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/upload/"><span class="tag">upload</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/validation/"><span class="tag">validation</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/versioning/"><span class="tag">versioning</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/webapi/"><span class="tag">webapi</span><span class="tag">20</span></a></div><div class="control"><a class="tags has-addons" href="/tags/webpack/"><span class="tag">webpack</span><span class="tag">1</span></a></div></div></div></div></div><div class="column-right-shadow is-hidden-widescreen is-sticky"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3 is-sticky"><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-07-28T00:00:00.000Z">2023-07-28</time></p><p class="title"><a href="/the-dotnet-world-mixin/">The .NET World - Mixin</a></p><p class="categories"><a href="/categories/dotnet/">dotnet</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-12-08T00:00:00.000Z">2020-12-08</time></p><p class="title"><a href="/the-dotnet-world-csharp-source-generator/">The .NET World - C# Source Generator</a></p><p class="categories"><a href="/categories/dotnet/">dotnet</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-11-09T00:00:00.000Z">2020-11-09</time></p><p class="title"><a href="/write-a-custom-plugin-with-aurelia-2-and-lerna/">Write a custom plugin with Aurelia 2 and Lerna</a></p><p class="categories"><a href="/categories/aurelia/">aurelia</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-10-23T00:00:00.000Z">2020-10-23</time></p><p class="title"><a href="/a-professional-asp.net-core-api-rabbitmq/">A Professional ASP.NET Core API - RabbitMQ</a></p><p class="categories"><a href="/categories/aspnetcore-api/">aspnetcore-api</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-10-22T00:00:00.000Z">2020-10-22</time></p><p class="title"><a href="/a-professional-asp.net-core-rss/">A Professional ASP.NET Core - RSS</a></p><p class="categories"><a href="/categories/aspnetcore/">aspnetcore</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2023/07/"><span class="level-start"><span class="level-item">July 2023</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/12/"><span class="level-start"><span class="level-item">December 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/11/"><span class="level-start"><span class="level-item">November 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/10/"><span class="level-start"><span class="level-item">October 2020</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/09/"><span class="level-start"><span class="level-item">September 2020</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/08/"><span class="level-start"><span class="level-item">August 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/07/"><span class="level-start"><span class="level-item">July 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/04/"><span class="level-start"><span class="level-item">April 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/">Hamed Fathi&#039;s Blog</a><p class="is-size-7"><span>&copy; 2023 Hamed Fathi</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>